<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>In tuned ¬∑ Emotion reflection</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="wrap">
      <header id="appHeader" class="topbar">
        <div class="brand" aria-label="In tuned home">
          <div class="logo" aria-hidden="true">
            <div class="mark" aria-hidden="true"></div>
          </div>
          <div class="brandText">
            <div class="title" data-i18n="appTitle">In tuned</div>
          </div>
        </div>
        <div class="actions">
          <button
            id="helpBtn"
            class="help iconBtn"
            type="button"
            data-i18n-aria-label="helpButtonLabel"
            aria-label="About In tuned"
          >
            <span class="helpIcon" aria-hidden="true">?</span>
          </button>

          <!-- Settings for guests: language only -->
          <div id="settingsControl" class="settingsControl">
            <button
              id="settingsBtn"
              class="settingsBtn iconBtn"
              type="button"
              aria-haspopup="true"
              aria-expanded="false"
              aria-label="Settings"
            >
              <span class="settingsIcon" aria-hidden="true">‚öôÔ∏è</span>
            </button>
            <div
              id="settingsMenu"
              class="settingsMenu"
              role="menu"
              aria-label="Settings"
            >
              <div class="settingsSection">
                <div
                  class="settingsLabel"
                  data-i18n="settingsLanguageLabel"
                >
                  Language
                </div>
                <div class="settingsRow">
                  <div class="langControl">
                    <button
                      id="langToggle"
                      class="langToggle"
                      type="button"
                      data-i18n-aria-label="langSwitchTooltip"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <span class="langIcon" aria-hidden="true">üåê</span>
                      <span
                        id="langCurrentLabel"
                        class="langCurrentLabel"
                      >
                        EN
                      </span>
                    </button>
                    <div
                      id="langMenu"
                      class="langMenu"
                      role="menu"
                      data-i18n-aria-label="langMenuLabel"
                      aria-label="Language"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="topbarDivider" aria-hidden="true"></div>

          <!-- Login button for guests -->
          <button
            id="loginBtn"
            class="loginBtn"
            type="button"
            data-i18n="loginButtonLabel"
          >
            Log in
          </button>

          <!-- Account control for logged in users -->
          <div id="accountControl" class="accountControl hidden">
            <button
              id="homeBtn"
              class="iconBtn homeBtn hidden"
              type="button"
              aria-label="Home"
            >
              <span class="homeIcon" aria-hidden="true">‚åÇ</span>
            </button>
            <button
              id="accountBtn"
              class="accountBtn"
              type="button"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <span id="accountNameLabel">User</span>
            </button>
            <div
              id="accountMenu"
              class="accountMenu"
              role="menu"
              aria-label="Account"
            >
              <button
                class="accountMenuItem"
                type="button"
                data-action="journal"
              >
                Journal
              </button>
              <button
                class="accountMenuItem"
                type="button"
                data-action="settings"
              >
                Settings
              </button>
              <button
                class="accountMenuItem"
                type="button"
                data-action="logout"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Notice banner under logo -->
      <div
        id="noticeBanner"
        class="noticeBanner"
        role="status"
        aria-live="polite"
      ></div>

      <!-- Maintenance shell: shown when site is in maintenance mode -->
      <div
        id="maintenanceShell"
        class="maintenanceShell hidden"
        aria-live="polite"
      >
        <div class="maintenanceContent">
          <div class="maintenanceBrand">
            <div class="logo" aria-hidden="true">
              <div class="mark" aria-hidden="true"></div>
            </div>
            <div class="brandText">
              <div class="title" data-i18n="appTitle">In tuned</div>
            </div>
          </div>
          <h2
            class="maintenanceTitle"
            data-i18n="maintenanceTitle"
          >
            In tuned is temporarily offline
          </h2>
          <p
            id="maintenanceMessage"
            class="maintenanceMessage"
            data-i18n="maintenanceMessage"
          >
            Site is currently down due to maintenance. We will be back shortly.
          </p>
          <p
            class="maintenanceNote"
            data-i18n="maintenanceNote"
          >
            Thank you for your patience while we finish a few upgrades.
          </p>
        </div>
      </div>

      <main id="appMain">
        <h1 data-i18n="headline">Emotion detector</h1>
        <p class="subtitle" data-i18n="subtitle">
          A simple space to notice what you are feeling across seven core
          emotions.
        </p>

        <section class="grid" aria-label="Emotion analysis layout">
          <div class="card">
            <label for="text" data-i18n="inputLabel">Text</label>
            <div class="inputShell">
              <textarea
                id="text"
                aria-label="Text to analyze"
                data-i18n-placeholder="inputPlaceholder"
                placeholder="Type a message..."
              ></textarea>
              <span
                id="wordInfo"
                class="wordInfo"
                data-i18n="wordInfoDefault"
              >
                250 word maximum
              </span>
            </div>

            <div class="row">
              <button
                id="analyze"
                class="btn primaryBtn"
                data-i18n="analyzeButton"
              >
                Analyze
              </button>
              <button
                id="addJournalButton"
                class="iconBtn primaryIconBtn hidden"
                type="button"
                aria-label="Save this analysis as a journal entry"
              >
                +
              </button>
              <span
                id="emojiTray"
                class="emojiInline"
                aria-live="polite"
                title="Emotion"
              >
                ü§î
              </span>
              <span id="status" class="status" aria-live="polite"></span>
            </div>

            <div
              class="card chartCard"
              aria-label="Core mixture bar chart"
            >
              <div
                class="panelTitle"
                data-i18n="coreMixtureTitle"
              >
                Core mixture
              </div>
              <div id="bars"></div>
            </div>
          </div>

          <div class="stack">
            <div class="card">
              <div
                class="panelTitle"
                data-i18n="analysisTitle"
              >
                Analysis
              </div>
              <div class="kv">
                <div class="pill" data-emotion-label="anger">Anger</div>
                <div class="value" id="v-anger">0.000</div>

                <div class="pill" data-emotion-label="disgust">
                  Disgust
                </div>
                <div class="value" id="v-disgust">0.000</div>

                <div class="pill" data-emotion-label="fear">Fear</div>
                <div class="value" id="v-fear">0.000</div>

                <div class="pill" data-emotion-label="joy">Joy</div>
                <div class="value" id="v-joy">0.000</div>

                <div class="pill" data-emotion-label="sadness">
                  Sadness
                </div>
                <div class="value" id="v-sadness">0.000</div>

                <div class="pill" data-emotion-label="passion">
                  Passion
                </div>
                <div class="value" id="v-passion">0.000</div>

                <div class="pill" data-emotion-label="surprise">
                  Surprise
                </div>
                <div class="value" id="v-surprise">0.000</div>
              </div>
            </div>

            <div class="card">
              <div
                class="panelTitle"
                data-i18n="resultsTitle"
              >
                Results
              </div>

              <div class="meta metaPrimary">
                <div
                  class="label"
                  data-i18n="resultsDominantLabel"
                >
                  Dominant
                </div>
                <div class="value" id="v-dominant">N/A</div>

                <div
                  class="label"
                  data-i18n="resultsEmotionLabel"
                >
                  Current emotion
                </div>
                <div class="value" id="v-emotion">N/A</div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer id="appFooter" data-i18n="footer">
        ¬© 2025 In tuned. All rights reserved.
      </footer>
    </div>

    <!-- About modal -->
    <div
      id="overlay"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modalTitle"
    >
      <div class="modal">
        <h2 id="modalTitle" data-i18n="aboutTitle">
          About In tuned
        </h2>
        <p
          class="muted"
          data-i18n="aboutDescriptionLabel"
        >
          Description:
        </p>
        <p data-i18n="aboutBody">
          In tuned is an intuitive reflection tool that helps you understand
          what you are feeling in the moment. You write a short passage of
          up to 250 words and the app highlights a blend of seven core
          emotions anger, disgust, fear, joy, sadness, passion, and surprise
          so you can see a simple emotional snapshot of your text. The goal
          is to support self awareness and healthy reflection only. It is
          not therapy and it is not a substitute for professional mental
          health care or medical advice.
        </p>
        <div class="actions">
          <button
            id="closeModal"
            class="ghost"
            data-i18n="aboutDone"
          >
            Done
          </button>
        </div>
      </div>
    </div>

    <!-- Crisis modal -->
    <div
      id="crisisOverlay"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="crisisTitle"
    >
      <div class="modal">
        <div class="alertRow">
          <div class="alertIcon" aria-hidden="true">‚ö†Ô∏è</div>
          <div>
            <h2 id="crisisTitle" data-i18n="crisisTitle">
              Wait! You are priceless and important.
            </h2>
            <p data-i18n="crisisBody">
              If you or your loved ones are having any thoughts of self
              harm or suicide, help is always available to you. This world
              needs you in it.
            </p>
          </div>
        </div>
        <p class="crisisNote" data-i18n="crisisNote">
          If you feel that you might be in danger, please contact a trusted
          crisis hotline or your local emergency services right away.
        </p>
        <div class="crisisActions">
          <a
            href="tel:988"
            id="crisisHotline"
            class="btn secondaryBtn"
          >
            <span data-i18n="crisisHotlineCta">
              Contact suicide hotline
            </span>
            ¬∑
            <span id="crisisHotlineNumber">988</span>
          </a>
          <a
            href="tel:911"
            id="crisisEmergency"
            class="btn dangerBtn"
          >
            <span data-i18n="crisisEmergencyCta">
              Contact emergency services
            </span>
            ¬∑
            <span id="crisisEmergencyNumber">911</span>
          </a>
        </div>
        <div class="actions">
          <button
            id="closeCrisis"
            class="ghost"
            data-i18n="crisisClose"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Auth: Log in -->
    <div
      id="authOverlayLogin"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="authLoginTitle"
    >
      <div class="modal authModal">
        <div class="authHeader">
          <div class="logo" aria-hidden="true">
            <div class="mark" aria-hidden="true"></div>
          </div>
          <div class="brandText">
            <div class="title" data-i18n="appTitle">In tuned</div>
          </div>
        </div>
        <h2 id="authLoginTitle">Log in</h2>
        <form id="loginForm" novalidate autocomplete="off">
          <label class="fieldLabel" for="loginIdentifier">
            Email or username
          </label>
          <input
            id="loginIdentifier"
            class="fieldInput"
            type="text"
            autocomplete="off"
          />

          <label class="fieldLabel" for="loginPassword">
            Password
          </label>
          <input
            id="loginPassword"
            class="fieldInput"
            type="password"
            autocomplete="off"
          />

          <p id="loginError" class="errorText hidden"></p>

          <div class="authLinksRow">
            <button
              id="openRegisterFromLogin"
              type="button"
              class="linkButton"
            >
              Create account
            </button>
            <button
              id="openForgotFromLogin"
              type="button"
              class="linkButton"
            >
              Forgot password
            </button>
          </div>

          <div class="actionsRow">
            <button
              id="cancelLogin"
              type="button"
              class="ghost"
            >
              Cancel
            </button>
            <button
              id="submitLogin"
              type="submit"
              class="btn primaryBtn"
            >
              Log in
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Auth: Create account -->
    <div
      id="authOverlayRegister"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="authRegisterTitle"
    >
      <div class="modal authModal">
        <div class="authHeader">
          <div class="logo" aria-hidden="true">
            <div class="mark" aria-hidden="true"></div>
          </div>
          <div class="brandText">
            <div class="title" data-i18n="appTitle">In tuned</div>
          </div>
        </div>
        <h2 id="authRegisterTitle">Create account</h2>
        <form id="registerForm" novalidate>
          <label class="fieldLabel" for="registerFirstName">
            First name
          </label>
          <input
            id="registerFirstName"
            class="fieldInput"
            type="text"
            autocomplete="given-name"
          />

          <label class="fieldLabel" for="registerLastName">
            Last name
          </label>
          <input
            id="registerLastName"
            class="fieldInput"
            type="text"
            autocomplete="family-name"
          />

          <label class="fieldLabel" for="registerUsername">
            Username
          </label>
          <input
            id="registerUsername"
            class="fieldInput"
            type="text"
            autocomplete="username"
          />

          <label class="fieldLabel" for="registerEmail">
            Email
          </label>
          <input
            id="registerEmail"
            class="fieldInput"
            type="email"
            autocomplete="email"
          />

          <label class="fieldLabel" for="registerPassword">
            Password
          </label>
          <input
            id="registerPassword"
            class="fieldInput"
            type="password"
            autocomplete="new-password"
          />

          <label class="fieldLabel" for="registerConfirmPassword">
            Re enter password
          </label>
          <input
            id="registerConfirmPassword"
            class="fieldInput"
            type="password"
            autocomplete="new-password"
          />

          <p id="registerError" class="errorText hidden"></p>

          <div class="actionsRow">
            <button
              id="cancelRegister"
              type="button"
              class="ghost"
            >
              Cancel
            </button>
            <button
              id="submitRegister"
              type="submit"
              class="btn primaryBtn"
            >
              Create account
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Auth: Forgot password (two step flow) -->
    <div
      id="authOverlayForgot"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="authForgotTitle"
    >
      <div class="modal authModal">
        <div class="authHeader">
          <div class="logo" aria-hidden="true">
            <div class="mark" aria-hidden="true"></div>
          </div>
          <div class="brandText">
            <div class="title" data-i18n="appTitle">In tuned</div>
          </div>
        </div>
        <h2 id="authForgotTitle">Reset password</h2>
        <form id="forgotForm" novalidate>
          <p id="forgotError" class="errorText hidden"></p>

          <!-- Step 1: identity -->
          <div id="forgotStepIdentity">
            <label class="fieldLabel" for="forgotEmail">
              Email
            </label>
            <input
              id="forgotEmail"
              class="fieldInput"
              type="email"
              autocomplete="email"
            />

            <label class="fieldLabel" for="forgotFirstName">
              First name
            </label>
            <input
              id="forgotFirstName"
              class="fieldInput"
              type="text"
            />

            <label class="fieldLabel" for="forgotLastName">
              Last name
            </label>
            <input
              id="forgotLastName"
              class="fieldInput"
              type="text"
            />

            <div class="actionsRow">
              <button
                id="cancelForgot"
                type="button"
                class="ghost"
              >
                Cancel
              </button>
              <button
                id="forgotContinue"
                type="button"
                class="btn primaryBtn"
              >
                Continue
              </button>
            </div>
          </div>

          <!-- Step 2: reset password -->
          <div id="forgotStepReset" class="hidden">
            <label class="fieldLabel" for="forgotNewPassword">
              New password
            </label>
            <input
              id="forgotNewPassword"
              class="fieldInput"
              type="password"
              autocomplete="new-password"
            />

            <label class="fieldLabel" for="forgotConfirmPassword">
              Re enter new password
            </label>
            <input
              id="forgotConfirmPassword"
              class="fieldInput"
              type="password"
              autocomplete="new-password"
            />

            <div class="actionsRow">
              <button
                id="cancelForgotReset"
                type="button"
                class="ghost"
              >
                Cancel
              </button>
              <button
                id="submitForgot"
                type="submit"
                class="btn primaryBtn"
              >
                Reset password
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Journal overlay -->
    <div
      id="journalOverlay"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="journalTitle"
    >
      <div class="modal journalModal">
        <div class="journalHeaderRow">
          <h2 id="journalTitle">Journal</h2>
          <button
            id="closeJournal"
            class="ghost"
            type="button"
          >
            Close
          </button>
        </div>
        <div class="journalLayout">
          <aside class="journalListPane">
            <div
              id="pinnedSectionHeader"
              class="journalSectionHeader hidden"
            >
              <span>Pinned</span>
            </div>
            <div
              id="pinnedJournalList"
              class="journalList pinned hidden"
            ></div>

            <div class="journalSectionHeader">
              <span>All entries</span>
            </div>
            <div
              id="journalList"
              class="journalList"
            ></div>
          </aside>

          <section class="journalDetailPane">
            <div id="journalEmptyState" class="journalEmptyState">
              <p>
                Select a journal entry to view it, or add one from an analysis.
              </p>
            </div>

            <div
              id="journalDetail"
              class="journalDetail hidden"
            >
              <div class="journalDetailHeader">
                <button
                  id="journalBackButton"
                  type="button"
                  class="iconBtn backBtn"
                  aria-label="Back to journal list"
                >
                  ‚Üê
                </button>
                <div>
                  <h3 id="journalDetailTitle"></h3>
                  <p
                    id="journalDetailMeta"
                    class="journalMeta"
                  ></p>
                  <div class="journalMetaRow">
                    <span class="journalMetaLabel">Dominant</span>
                    <span
                      id="journalDetailDominant"
                      class="journalMetaValue"
                    >
                      N/A
                    </span>
                    <span class="journalMetaLabel">Current</span>
                    <span
                      id="journalDetailEmotion"
                      class="journalMetaValue"
                    >
                      N/A
                    </span>
                    <span class="journalMetaLabel">Barnhart rating</span>
                    <span
                      id="journalDetailBarnhart"
                      class="journalMetaValue"
                    >
                      N/A
                    </span>
                  </div>
                </div>
                <div class="journalDetailActions">
                  <button
                    id="journalFlagButton"
                    type="button"
                    class="iconBtn warningIndicator hidden"
                    title="This entry mentions self harm or suicide"
                  >
                    ‚ö†Ô∏è
                  </button>
                  <button
                    id="journalEditMenu"
                    type="button"
                    class="iconBtn"
                  >
                    ‚ãØ
                  </button>
                  <div
                    id="journalEditMenuDropdown"
                    class="journalEditMenuDropdown hidden"
                  >
                    <!-- Reordered: Pin, Edit, Delete -->
                    <button
                      id="journalPinToggleButton"
                      type="button"
                    >
                      Pin
                    </button>
                    <button
                      id="journalEditButton"
                      type="button"
                    >
                      Edit
                    </button>
                    <button
                      id="journalDeleteButton"
                      type="button"
                      class="dangerTextButton"
                    >
                      Delete
                    </button>
                  </div>
                </div>
              </div>

              <div class="journalDetailContent">
                <div class="journalSourceBlock">
                  <h4>Original text</h4>
                  <p id="journalDetailSourceText"></p>
                </div>
                <div class="journalAnalysisBlock">
                  <h4>Analysis snapshot</h4>
                  <pre id="journalDetailAnalysis"></pre>
                </div>
                <div class="journalTextBlock">
                  <h4>Journal</h4>
                  <textarea
                    id="journalDetailText"
                    class="journalEditArea"
                    disabled
                  ></textarea>
                </div>
              </div>

              <div
                id="journalDetailActionsRow"
                class="actionsRow hidden"
              >
                <button
                  id="cancelJournalEdit"
                  type="button"
                  class="ghost"
                >
                  Cancel
                </button>
                <button
                  id="saveJournalEdit"
                  type="button"
                  class="btn primaryBtn"
                >
                  Save
                </button>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- Journal delete confirmation -->
    <div
      id="journalDeleteConfirmOverlay"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="journalDeleteConfirmTitle"
    >
      <div class="modal">
        <h2 id="journalDeleteConfirmTitle">Delete journal entry?</h2>
        <p>
          Are you sure you want to delete this journal? This action cannot be
          undone.
        </p>
        <div class="actionsRow">
          <button
            id="cancelJournalDelete"
            type="button"
            class="ghost"
          >
            Cancel
          </button>
          <button
            id="confirmJournalDelete"
            type="button"
            class="btn dangerBtn"
          >
            Delete journal
          </button>
        </div>
      </div>
    </div>

    <!-- Account settings overlay (theme and language for logged in users) -->
    <div
      id="accountSettingsOverlay"
      class="overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="accountSettingsTitle"
    >
      <div class="modal authModal">
        <div class="authHeader">
          <div class="logo" aria-hidden="true">
            <div class="mark" aria-hidden="true"></div>
          </div>
          <div class="brandText">
            <div class="title" data-i18n="appTitle">In tuned</div>
          </div>
        </div>
        <h2 id="accountSettingsTitle">Settings</h2>
        <form id="accountSettingsForm" novalidate>
          <div class="settingsSection">
            <div class="settingsLabel">Theme</div>
            <div class="settingsRow">
              <button
                id="accountThemeToggle"
                class="modeDot"
                type="button"
                aria-label="Toggle light or dark theme"
              >
                <span class="modeDotLabel">Theme</span>
                <div class="modeDotTrack" aria-hidden="true">
                  <div class="modeDotThumb"></div>
                </div>
              </button>
            </div>
          </div>

          <div class="settingsSection">
            <div class="settingsLabel">Language</div>
            <div class="settingsRow">
              <div class="langControl">
                <button
                  id="accountLangToggle"
                  class="langToggle"
                  type="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <span class="langIcon" aria-hidden="true">üåê</span>
                  <span
                    id="accountLangCurrentLabel"
                    class="langCurrentLabel"
                  >
                    EN
                  </span>
                </button>
                <div
                  id="accountLangMenu"
                  class="langMenu"
                  role="menu"
                  aria-label="Language"
                ></div>
              </div>
            </div>
          </div>

          <p id="accountSettingsError" class="errorText hidden"></p>

          <div class="actionsRow">
            <button
              id="cancelAccountSettings"
              type="button"
              class="ghost"
            >
              Cancel
            </button>
            <button
              id="saveAccountSettings"
              type="submit"
              class="btn primaryBtn"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="main.js" defer></script>
  </body>
</html>
